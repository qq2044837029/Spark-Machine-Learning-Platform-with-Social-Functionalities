{% extends "base2.html" %}
{#the reason why put login.html in this file is because that this is where django auth view expects to find templates#}
{% block title %}Log-in{% endblock %}
{% block content %}
    <h1>Log-in</h1>
    {% if form.errors %}
        <p>
            Your username and password didn't match.
            Please try again.
        </p>
    {% else %}
        <p>Please, use the following form to log-in. If you dont have an account <a href="{% url 'register' %}">register here </a></p>
        <p>you can either use you email or your username</p>
    {% endif %}
    <div class="login-form">
        <form action="{% url 'login' %}" method="post">
            {{ form.as_p }}
            {% csrf_token %}
{#            here this variable next has to be URL, 比如用户需要访问的某个view页面需要登录（decorated by required_login）,#}
{#            若未登录，则由于decorator，用户会被redirect to this login view，原先想浏览的那个view地址就存在了这个next里，等到用户登录成功后，会根据这个next，自动跳转回去 #}
            <input type="hidden" name="next" value="{{ next }}" />
            <p><input type="submit" value="Log-in"></p>
        </form>
    <p><a href="{% url 'password_reset' %}">Forget your password? Click</a></p>
    </div>

{% endblock %}

